{"ast":null,"code":"var _jsxFileName = \"/Users/minkijung/Desktop/tplkoreanbook/client/src/components/BookList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport styles from './BookList.module.css';\nimport axios from 'axios';\nimport useAsync from '../hooks/useAsync';\nimport Book from './Book.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function getBooks(category, setSearchTerm) {\n  const response = await axios.get(`http://127.0.0.1:5000/category/${category}`);\n  console.log(response);\n  setSearchTerm('');\n  return response.data;\n}\n\nconst BookList = _ref => {\n  _s();\n\n  let {\n    category\n  } = _ref;\n  const [state] = useAsync(() => getBooks(category, setSearchTerm), [category]);\n  const {\n    loading,\n    data,\n    error\n  } = state;\n  const [visible, setVisible] = useState(6);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const showMoreBooks = () => {\n    setVisible(prev => prev + 6);\n  };\n\n  const showLessBooks = () => {\n    setVisible(prev => prev - 6);\n  };\n\n  const searchHandler = e => {\n    const userInput = e.target.value;\n    setSearchTerm(userInput);\n  }; // Error handling.\n\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Error\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 23\n  }, this);\n  if (!data) return null;\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: styles['book-list'],\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: styles['searchbar'],\n        type: \"text\",\n        placeholder: \"Search...\",\n        onChange: searchHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: styles['category'],\n        children: category === '' ? 'All' : category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: styles['list-container'],\n        children: data // After being filtered by the user's selected category, It will be filtered by the user's search input.\n        .filter(book => {\n          if (book.title.replace(/\\s/g, '').includes(searchTerm.replace(/\\s/g, '').substring(0, searchTerm.length))) {\n            return book;\n          }\n        }).slice(0, visible).map((book, index) => /*#__PURE__*/_jsxDEV(Book, {\n          cover: book.cover,\n          title: book.title,\n          author: book.author,\n          address: book.link\n        }, book.count, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showMoreBooks,\n        children: \"Show More!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showLessBooks,\n        children: \"Show Less!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BookList, \"JXmP6RtOK3GLhiMqQHdbsZwzg6k=\", false, function () {\n  return [useAsync];\n});\n\n_c = BookList;\nexport default BookList;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookList\");","map":{"version":3,"names":["React","useState","useEffect","styles","axios","useAsync","Book","getBooks","category","setSearchTerm","response","get","console","log","data","BookList","state","loading","error","visible","setVisible","searchTerm","showMoreBooks","prev","showLessBooks","searchHandler","e","userInput","target","value","filter","book","title","replace","includes","substring","length","slice","map","index","cover","author","link","count"],"sources":["/Users/minkijung/Desktop/tplkoreanbook/client/src/components/BookList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styles from './BookList.module.css';\nimport axios from 'axios';\nimport useAsync from '../hooks/useAsync'\nimport Book from './Book.js'\n\nasync function getBooks(category, setSearchTerm) {\n    const response = await axios.get(`http://127.0.0.1:5000/category/${category}`);\n    console.log(response);\n    setSearchTerm('');\n    return response.data;\n}\n\nconst BookList = ({ category }) => {\n\n    const [state] = useAsync(() => getBooks(category, setSearchTerm), [category],);\n    const { loading, data, error } = state;\n    const [visible, setVisible] = useState(6);\n    const [searchTerm, setSearchTerm] = useState('');\n\n\n    const showMoreBooks = () => {\n        setVisible((prev) => prev + 6)\n    }\n\n    const showLessBooks = () => {\n        setVisible((prev) => prev - 6)\n    }\n\n    const searchHandler = (e) => {\n        const userInput = e.target.value;\n        setSearchTerm(userInput)\n    }\n    // Error handling.\n    if (loading) return <div>Loading...</div>\n    if (error) return <div>Error</div>\n    if (!data) return null\n\n    return (\n        <section className={styles['book-list']}>\n            <div>\n                <input className={styles['searchbar']} type=\"text\" placeholder='Search...' onChange={searchHandler} />\n                <h2 className={styles['category']}>{category === '' ? 'All' : category}</h2>\n                <ul className={styles['list-container']}>\n                    {/* Test filtering\n                    {/* Filtered by users' selected category */}\n                    {data\n                        // After being filtered by the user's selected category, It will be filtered by the user's search input.\n                        .filter((book) => {\n                            if (book.title.replace(/\\s/g, '').includes(searchTerm.replace(/\\s/g, '').substring(0, searchTerm.length))) {\n                                return book;\n                            }\n                        }).slice(0, visible).map((book, index) => (\n                            <Book\n                                key={book.count}\n                                cover={book.cover}\n                                title={book.title}\n                                author={book.author}\n                                address={book.link}\n                            />\n                        ))}\n                </ul>\n                <button onClick={showMoreBooks}>Show More!</button>\n                <button onClick={showLessBooks}>Show Less!</button>\n            </div>\n        </section>\n    )\n};\n\nexport default BookList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/minkijung/Desktop/tplkoreanbook/client/src/components/BookList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport styles from './BookList.module.css';\nimport axios from 'axios';\nimport useAsync from '../hooks/useAsync';\nimport Book from './Book.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function getBooks(category) {\n  const response = await axios.get(`http://127.0.0.1:5000/category/${category}`);\n  console.log(response);\n  return response.data;\n}\n\nconst BookList = _ref => {\n  _s();\n\n  let {\n    category,\n    userInput\n  } = _ref;\n  const [state] = useAsync(() => getBooks(category), [category]);\n  const {\n    loading,\n    data,\n    error\n  } = state;\n  const [visible, setVisible] = useState(20);\n\n  const showMoreBooks = () => {\n    setVisible(prev => prev + 20);\n  };\n\n  const showLessBooks = () => {\n    setVisible(prev => prev - 20);\n  }; // Error handling.\n\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Error\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 23\n  }, this);\n  if (!data) return null;\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: styles['book-list'],\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: styles['category'],\n        children: category === '' ? 'All' : category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: styles['list-container'],\n        children: data // After being filtered by the user's selected category, It will be filtered by the user's search input.\n        .filter(book => {\n          if (book.title.replace(/\\s/g, '').includes(userInput.replace(/\\s/g, '').substring(0, userInput.length))) {\n            return book;\n          }\n        }).slice(0, visible).map((book, index) => /*#__PURE__*/_jsxDEV(Book, {\n          cover: book.cover,\n          title: book.title,\n          author: book.author,\n          address: book.link\n        }, book.count, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showMoreBooks,\n        children: \"Show More!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: showLessBooks,\n        children: \"Show Less!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BookList, \"PKWwHIMuNNXJHO4/Md+It75mpKs=\", false, function () {\n  return [useAsync];\n});\n\n_c = BookList;\nexport default BookList;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookList\");","map":{"version":3,"names":["React","useState","styles","axios","useAsync","Book","getBooks","category","response","get","console","log","data","BookList","userInput","state","loading","error","visible","setVisible","showMoreBooks","prev","showLessBooks","filter","book","title","replace","includes","substring","length","slice","map","index","cover","author","link","count"],"sources":["/Users/minkijung/Desktop/tplkoreanbook/client/src/components/BookList.js"],"sourcesContent":["import React, { useState } from 'react';\nimport styles from './BookList.module.css';\nimport axios from 'axios';\nimport useAsync from '../hooks/useAsync'\nimport Book from './Book.js'\n\nasync function getBooks(category) {\n    const response = await axios.get(`http://127.0.0.1:5000/category/${category}`);\n    console.log(response);\n\n    return response.data;\n}\n\nconst BookList = ({ category, userInput }) => {\n\n    const [state] = useAsync(() => getBooks(category), [category],);\n    const { loading, data, error } = state;\n    const [visible, setVisible] = useState(20);\n\n\n    const showMoreBooks = () => {\n        setVisible((prev) => prev + 20)\n    }\n\n    const showLessBooks = () => {\n        setVisible((prev) => prev - 20)\n    }\n\n    // Error handling.\n    if (loading) return <div>Loading...</div>\n    if (error) return <div>Error</div>\n    if (!data) return null\n\n    return (\n        <section className={styles['book-list']}>\n            <div>\n                <h2 className={styles['category']}>{category === '' ? 'All' : category}</h2>\n                <ul className={styles['list-container']}>\n                    {/* Test filtering\n                    {/* Filtered by users' selected category */}\n                    {data\n                        // After being filtered by the user's selected category, It will be filtered by the user's search input.\n                        .filter((book) => {\n                            if (book.title.replace(/\\s/g, '').includes(userInput.replace(/\\s/g, '').substring(0, userInput.length))) {\n                                return book;\n                            }\n                        }).slice(0, visible).map((book, index) => (\n                            <Book\n                                key={book.count}\n                                cover={book.cover}\n                                title={book.title}\n                                author={book.author}\n                                address={book.link}\n                            />\n                        ))}\n                </ul>\n                <button onClick={showMoreBooks}>Show More!</button>\n                <button onClick={showLessBooks}>Show Less!</button>\n            </div>\n        </section>\n    )\n};\n\nexport default BookList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}